<?xml version="1.0" encoding="gbk" ?>
<!DOCTYPE mapper
        PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="User">
    <!--查询全部-->
    <select id="User.queryAll" parameterType="String" resultType="com.user.service.dbservice.domain.User">
        select * from user
    </select>
    <select id="User.queryByID" parameterType="com.user.service.dbservice.domain.User" resultType="com.user.service.dbservice.domain.User">
        select * from user where userid= #{userID}
    </select>
    <!--根据条件模糊查询-->
    <select id="User.queryByCondition" parameterType="com.user.service.dbservice.domain.UserCondition"
            resultType="com.user.service.dbservice.domain.User">

        <bind name="con" value="'%' + namecondition + '%'"></bind>

        select * from user where username like #{con}
    </select>

    <insert id="User.createUser" parameterType="com.user.service.dbservice.domain.User">
        INSERT INTO user (
        userid,
        username,
        phoneno,
        regdate,
        balance,
        comment
        )
        VALUES (
        #{userID},
        #{userName},
        #{phoneNo},
        #{regDate},
        #{balance},
        #{comment}
        );
    </insert>

    <update id="User.updateBalance" parameterType="com.user.service.dbservice.domain.User">
        update user set balance=${balance} where userid=#{userID}
    </update>
    <update id="User.updateComment" parameterType="com.user.service.dbservice.domain.User">
        update user set comment='${comment}' where userid=#{userID}
    </update>

    <delete id="User.delete" parameterType="com.user.service.dbservice.domain.User">
        delete from user where userid=#{userID};
    </delete>

    <!--FOR TEST-->
    <select id="User.tQueryByID" parameterType="String" resultType="Map">
        select * from user where userid = #{userid}
    </select>

    <select id="User.tQueryBy2Params" parameterType="Map" resultType="Map">
        select * from user where userid = #{userid} and username = #{username}
    </select>

</mapper>

        <!--CREATE TABLE user (-->
        <!--userid   VARCHAR PRIMARY KEY ASC ON CONFLICT FAIL-->
        <!--UNIQUE-->
        <!--NOT NULL,-->
        <!--username VARCHAR NOT NULL,-->
        <!--phoneno  VARCHAR,-->
        <!--regdate  DATE    NOT NULL,-->
        <!--balance  DOUBLE  NOT NULL-->
        <!--DEFAULT (0.0),-->
        <!--comment  TEXT-->
        <!--);-->










